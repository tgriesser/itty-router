module.exports={Router:function({base:t="",routes:l=[],onResponse:$}={}){return{__proto__:new Proxy({},{get:(e,a,o)=>(e,...r)=>l.push([a.toUpperCase(),RegExp(`^${(t+e).replace(/(\/?)\*/g,"($1.*)?").replace(/\/$/,"").replace(/:(\w+)(\?)?(\.)?/g,"$2(?<$1>[^/]+)$2$3").replace(/\.(?=[\w(])/,"\\.").replace(/\)\.\?\(([^\[]+)\[\^/g,"?)\\.?($1(?<=\\.)[^\\.")}/*$`),r,t+e])&&o}),routes:l,async handle(e,...r){let a,o,t=new URL(e.url);e.query=Object.fromEntries(t.searchParams);for(var[p,s,n,c]of l)if((p===e.method||"ALL"===p)&&(o=t.pathname.match(s))){e.params=o.groups,e.matched=c;for(var u of n)if(void 0!==(a=await u(e.proxy||e,...r)))return $?$(e,a):a}}}}};
